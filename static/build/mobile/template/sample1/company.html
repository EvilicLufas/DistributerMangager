<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0,minimum-scale=1.0, maximum-scale=1.0, user-scalable=no,target-densitydpi=medium-dpi">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no">
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<script type="text/javascript" src="/fishstrap/lib/mod.js"></script>
	<title>公司介绍</title>
<link rel="stylesheet" type="text/css" href="/mobile/common/core/core_446908d.css">
<link rel="stylesheet" type="text/css" href="/mobile/common/dialog/dialog_09f6162.css">
<link rel="stylesheet" type="text/css" href="/mobile/common/footer/footer_fd3ce24.css">
<link rel="stylesheet" type="text/css" href="/fishstrap/lib/swipe.css">
<link rel="stylesheet" type="text/css" href="/mobile/common/banner/banner_eb146bf.css">
<link rel="stylesheet" type="text/css" href="/mobile/common/metro/metro_702ca72.css">

<script type="text/javascript" src="/fishstrap/lib/fastclick.js"></script>
<script type="text/javascript" src="http://apps.bdimg.com/libs/underscore.js/1.7.0/underscore-min.js"></script>
<script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/1.11.1/jquery.min.js"></script>
<script type="text/javascript" src="/fishstrap/core/global_bd82cd3.js"></script>
<script type="text/javascript" src="/mobile/common/dialog/dialog_096258d.js"></script>
<script type="text/javascript" src="/mobile/common/core/core_f8f3436.js"></script>
<script type="text/javascript" src="/mobile/common/footer/footer_b27c0d4.js"></script>
<script type="text/javascript" src="/fishstrap/lib/swipe.js"></script>
<script type="text/javascript" src="/mobile/common/banner/banner_00e7876.js"></script>
<script type="text/javascript" src="/mobile/common/metro/metro_c67848f.js"></script>

</head>
<body>
	<div id="body"></div>
	<script type="text/javascript">
		var $ = require('mobile/common/core/core.js');
		var dialog = require('mobile/common/dialog/dialog.js');
		var Footer = require('mobile/common/footer/footer.js');
		var Banner = require('mobile/common/banner/banner.js');
		var Metro = require('mobile/common/metro/metro.js');
		var companyBanner = [];
		var companyClassify = [];
		function getBanner(next){
			$.get('/banner/getByUserId',{},function(data){
				if( data.code != 0 ){
					dialog.message(data.msg);
					return;
				}
				companyBanner = data.data.data;
				next();
			});
		}
		function getClassify(next){
			$.get('/classify/getByUserId',{},function(data){
				if( data.code != 0 ){
					dialog.message(data.msg);
					return;
				}
				companyClassify = data.data.data;
				next();
			});
		}
		function go(){
			//构建footer
			var footer = new Footer('company');
			
			//构建banner
			var bannerArgv = {
				interval:5000,
				images:[]
			};
			bannerArgv.images = _.map(companyBanner,function(single){
				return {link:single.url,image:single.image};
			});
			var banner = new Banner(bannerArgv);
			
			//构建metro
			var metroArgv = _.map(companyClassify,function(single){
				return {icon:single.icon,title:single.title,link:'articlelist.html?userCompanyClassifyId='+single.userCompanyClassifyId};
			}); 
			var metro = new Metro(metroArgv);
			
			//构建page
			var pageHtml = banner.el + metro.el + footer.el;
			$.page.start(pageHtml);
		}
		getBanner(function(){
			getClassify(function(){
				go();
			});
		});
	</script>
</body>
</html>